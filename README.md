# NVIDIA feature discovery

## Table of Contents
  * [Overview](#overview)
  * [Alpha Version](#alpha-version)
  * [Requirements](#requirements)
  * [Command line interface](#command-line-interface)
  * [Quick Start](#quick-start)
    + [Node Feature Discovery](#node-feature-discovery)
    + [Deploy NVIDIA Feature Discovery](#deploy-nivida-feature-discovery)
      - [Deamonset](#deamonset)
      - [Job](#job)
  * [Labels](#labels)
  * [Building from source](#building-from-source)

## Overview

NVIDIA Feature Discovery for Kubernetes is a software that allows you to
automatically generate label depending on the GPU available on the node. It uses
the [Node Feature Discovery](https://github.com/kubernetes-sigs/node-feature-discovery)
from Kubernetes to label nodes.

## Alpha Version

**WARNING:** This tool is in alpha version. We may break the API without notice
between releases.

## Requirements

TODO

## Command line interface

TODO

## Quick Start

### Node Feature Discovery

The first step is to make sure the [Node Feature Discovery](https://github.com/kubernetes-sigs/node-feature-discovery)
is running on every node you want to label. NVIDIA Feature Discovery use
the `local` source so be sure to mount volumes. See
https://github.com/kubernetes-sigs/node-feature-discovery for more details.

### Deploy NVIDIA Feature Discovery

The next step is to run NVIDIA Feature Discovery on each node as a Deamonset or
as a Job.

#### Deamonset

```shell
$ kubectl apply -f ${YAML_DAEMONSET}
```

#### Job

```shell
$ kubectl apply -f ${YAML_JOB}
```

## Labels

This is the list of the labels generated by NVIDIA Feature Discovery and their
meaning:

| Label Name            | Value Type | Meaning                      | Example        |
| --------------------- | ---------- | ---------------------------- | -------------- |
| nvidia-driver-version | String     | Version of the NVIDIA driver | 418.56         |
| nvidia-model          | String     | Model of the GPU             | GeForce-GT-710 |
| nvidia-memory         | Interger   | Memory of the GPU in Mb      | 2000           |

## Building from source

Download the source code:
```shell
git clone ${GIT_URL}
```

Get dependies:
```shell
dep ensure
```

Build it:
```
go build
```
